<ion-view view-title="Messages">
  <ion-content class="bg-grey">
    <ion-refresher pulling-text="Pull to refresh..." on-refresh="populateEveryMessages()"></ion-refresher>

    <div class="tabs tabs-striped tabs-top"  ng-show="isDoctor()">
      <a class="tab-item" ng-class="{ active: isSet(1) }" ng-click="setTab(1)">
        Inbox
      </a>
      <a class="tab-item" ng-class="{ active: isSet(2) }" ng-click="setTab(2)">
        Sent
      </a>
    </div>

    <div class="bg-white item-input-inset">
      <input class="bg-grey" type="text" placeholder=" Search" ng-model="search.fullname" style="width:100%; padding-left:11px;" />
    </div>

    <ion-list ng-show="isSet(1)">
      <ion-item class="item-remove-animate item-icon-right bg-light-orange" ng-repeat="message in received_messages | filter:search" type="item-text-wrap" href="#/menu/message-detail/{{message.id}}">
        <span ng-if="message.is_read">
          <h2 class="Roboto-light">{{message.fullname}}</h2>
          <p class="Roboto-light">{{message.message}}</p>
        </span>
        <span ng-if="!message.is_read">
            <h2>{{message.fullname}}</h2>
            <p>{{message.message}}</p>
        </span>
        <i class="icon ion-chevron-right icon-accessory"></i>
      </ion-item>
    </ion-list>

    <ion-list ng-show="isSet(2)">
      <ion-item class="item-remove-animate item-icon-right bg-light-orange" ng-repeat="message in sent_messages" type="item-text-wrap" href="#/menu/sent-message-detail/{{message.id}}">
        <h2>{{message.fullname}}</h2>
        <p>{{message.message}}</p>
        <i class="icon ion-chevron-right icon-accessory"></i>
      </ion-item>
    </ion-list>
  </ion-content>
  <ion-footer-bar align-title="center" class="bg-white shadow-bottom" ng-show="isDoctor()">
    <span class="title"></span>
    <div class="buttons">
      <a class="button bg-blue text-white Roboto-light" type="button" href="#/menu/select-recipient">Compose Message</a>
    </div>
  </ion-footer-bar>
</ion-view>
